<div class="row">
  <div class="">
    <div
      *ngIf="dataLoaded == false"
      class="spinner-grow text-warning"
      role="status"
    >
      <span class="visually-hidden">Loading...</span>
    </div>

    <div class="mb-3">
      <label for="filterText" class="form-label"><h6>Araç Sorgula</h6></label>
      <input
        type="text"
        [(ngModel)]="filterText"
        class="form-control"
        id="filterText"
        placeholder="sorgulama ifadesi giriniz"
      />
    </div>
    <div *ngIf="filterText" class="alert alert-success">
      {{ filterText }} sorguladınız!
    </div>

    <!-- Filter section start-->
    <div class="content"> 
    <div class="row mb-2">      
      <div class="col-col-4">        
        <label class="mr-sm-2" for="inlineFormCustomSelect">
          Kategoriler
        </label>
        <select
          class="custom-select custom-select-md mb-3"
          [(ngModel)]="categoryId"
          aria-placeholder="Tüm Kategoriler"
        >
          <option selected>Kategoriler</option>
          <option
            *ngFor="let category of categories"
            [value]="category.categoryId"
            [selected]="getSelectedCategoryId(category.categoryId)"
          >
            {{ category.categoryName }}
          </option>
        </select>
      </div>
   
    
      <div class="col-col-4"> 
        <label class="mr-sm-2" for="inlineFormCustomSelect"> Araçlar </label>
        <select
          class="custom-select custom-select-md mb-3"
          [(ngModel)]="carId"
          aria-placeholder="Tüm Araçlar"
        >
          <option selected>Araçlar</option>
          <option
            *ngFor="let car of cars"
            [value]="car.carId"
            [selected]="getSelectedCarId(car.carId)"
          >
            {{ car.carName }}
          </option>
        </select>
      </div>
   

      <div class="col-col-4"> 
        <label class="mr-sm-2" for="inlineFormCustomSelect"> Markalar </label>
        <select
          class="custom-select custom-select-md mb-3"
          [(ngModel)]="brandId"
          aria-placeholder="Tüm Markalar"
        >
          <option selected>Markalar</option>
          <option
            [value]="brand.brandId"
            *ngFor="let brand of brands"
            [selected]="getSelectedBrandId(brand.brandId)"
          >
            {{ brand.brandName }}
          </option>
        </select>
      </div>

      <div class="col-col-4"> 
        <label class="mr-sm-2" for="inlineFormCustomSelect"> Renkler </label>
        <select
          class="custom-select custom-select-md mb-3"
          [(ngModel)]="colorId"
          aria-placeholder="Tüm Renkler"
        >
          <option selected>Renkler</option>
          <option
            *ngFor="let color of colors"
            [value]="color.colorId"
            [selected]="getSelectedColorId(color.colorId)"
          >
            {{ color.colorName }}
          </option>
        </select>
      </div>
      <div class="col-md-2" style="margin-top: 30px; width: 100px">
        <button
          class="btn btn-success"
          routerLink="/cars/filter/{{ brandId }}/{{ colorId }}/{{categoryId}}/{{carId}}"          
        >
          Filitrele
        </button>
      </div>
    </div>
  </div>
      <!-- Filter section end-->

    <div *ngIf="dataLoaded == true" class="carDetailDto"></div>
    <th>Araç Detay Listesi</th>
    <table *ngIf="dataLoaded == true" class="table table-hover">
      <thead>
        <tr>
          <th>Kategori</th>
          <th>Araç İsmi</th>
          <th>Marka</th>
          <th>Model</th>
          <th>Model Yılı</th>
          <th>Renk</th>
          <th>Günlük Fiyat</th>
          <th>Kdv'li Günlük Fiyat</th>
          <th>Araç Bilgileri</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let carDetailDto of carDetailDtos | filterCarDetailDto: filterText
          "
        >
          <td>{{ carDetailDto.categoryName }}</td>
          <td>{{ carDetailDto.carName }}</td>
          <td>{{ carDetailDto.brandName }}</td>
          <td>{{ carDetailDto.brandModel }}</td>
          <td>{{ carDetailDto.modelYear }}</td>
          <td>{{ carDetailDto.colorName }}</td>
          <td>{{ carDetailDto.dailyPrice | currency: "TRY":"₺" }}</td>
          <td>
            {{ carDetailDto.dailyPrice | vatAdded: 18 | currency: "TRY":"₺" }}
          </td>
          <td>{{ carDetailDto.description }}</td>
          <td>
            <button
              (click)="addToRent(carDetailDto)"
              type="button"
              class="btn btn-success"
            >
              Kirala
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
